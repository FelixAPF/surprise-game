<div class="admin-container">
  
  <header class="admin-header">
    <div class="branding">
      <div style="font-size: 0.9rem; color: #666; letter-spacing: 3px; font-weight: bold;">BACKSTAGE PASS</div>
      <h1>GAME MASTER</h1>
    </div>
    
    <div class="header-actions">
      <input #fileInput type="file" (change)="importPrizes($event)" style="display:none" accept=".json" />
      <button (click)="fileInput.click()" class="action-btn">üìÇ Import</button>
      <button (click)="exportPrizes()" class="action-btn">üíæ Export</button>
      <button class="action-btn reset-btn" (click)="resetGame()">‚ö† Reset Data</button>
    </div>
  </header>
  
  <div class="status-bar" [ngClass]="prizes().length === 16 ? 'ready' : 'setup'">
    <span *ngIf="prizes().length < 16">‚ö† SETUP IN PROGRESS: {{prizes().length}} / 16 PRIZES CONFIGURED</span>
    <span *ngIf="prizes().length === 16">‚úì SYSTEM READY FOR BROADCAST</span>
  </div>

  <div class="form-card" [class.editing]="editingId">
    <div class="inputs">
      <input [(ngModel)]="newPrize.name" placeholder="Prize Title" />
      <input [(ngModel)]="newPrize.imageUrl" placeholder="Image URL (http://...)" />
      <input type="number" [(ngModel)]="newPrize.value" placeholder="Value ($)" />
      <select [(ngModel)]="newPrize.category">
        <option *ngFor="let c of categories" [value]="c">{{c}}</option>
      </select>
    </div>
    
    <div class="form-actions" style="display: flex; gap: 10px;">
      <button class="add-btn" (click)="savePrize()" 
              [disabled]="!editingId && prizes().length >= 16"
              [class.update-btn]="editingId">
        {{ editingId ? 'UPDATE ‚Üª' : 'ADD +' }}
      </button>
      
      <button *ngIf="editingId" class="cancel-btn" (click)="cancelEdit()">
        CANCEL
      </button>
    </div>
  </div>

  <div class="list-grid">
    <div *ngFor="let p of sortedPrizes()" 
         class="prize-item" 
         [ngClass]="p.category"
         [class.editing-item]="editingId === p.id">
      
      <div class="item-info" (click)="openPreview(p)">
        <div class="item-category" [style.color]="getCategoryColor(p.category)">{{p.category}}</div>
        <div class="item-name">{{p.name}}</div>
        <div class="item-value">{{p.value | currency}}</div>
      </div>
      
      <div class="item-actions">
        <button class="icon-btn" (click)="openPreview(p)" title="Preview">üëÅ</button>
        <button class="icon-btn edit" (click)="editPrize(p)" title="Edit">‚úé</button>
        <button class="icon-btn delete" (click)="removePrize(p.id)" title="Delete">‚úï</button>
      </div>
      
    </div>
  </div>

  <div class="start-section" *ngIf="prizes().length === 16 && !editingId">
    <button class="start-btn" (click)="startGame()">
      INITIATE GAME
    </button>
  </div>
</div>

<div class="overlay" *ngIf="previewPrize" (click)="closePreview()">
  <div class="zoom-card" (click)="$event.stopPropagation()">
    <h2 style="font-family: 'Bebas Neue'; color: #ccc;">PREVIEW</h2>
    <img [src]="previewPrize.imageUrl" alt="Prize" class="reveal-img">
    <div style="background: #333; padding: 10px; border-radius: 4px;">
      <h3 style="margin:0">{{previewPrize.name}}</h3>
      <p style="color: #e50914; font-weight: bold; margin: 5px 0;">{{previewPrize.category}}</p>
      <p style="color: #888; font-size: 0.9rem;">Value: {{previewPrize.value | currency}}</p>
    </div>
    <p style="margin-top: 15px; color: #555; font-size: 0.8rem; cursor: pointer;">(CLICK OUTSIDE TO CLOSE)</p>
  </div>
</div>